# Generated by Django 6.0 on 2025-12-14 13:32

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ("academics", "0003_initial"),
        ("core", "0002_initial"),
        ("transport", "0001_initial"),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.AddField(
            model_name="attendant",
            name="user",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="attendant_profile",
                to=settings.AUTH_USER_MODEL,
                verbose_name="user account",
            ),
        ),
        migrations.AddField(
            model_name="driver",
            name="institution",
            field=models.ForeignKey(
                help_text="Institution this record belongs to",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="%(class)s_records",
                to="core.institution",
                verbose_name="institution",
            ),
        ),
        migrations.AddField(
            model_name="driver",
            name="user",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="driver_profile",
                to=settings.AUTH_USER_MODEL,
                verbose_name="user account",
            ),
        ),
        migrations.AddField(
            model_name="fuelrecord",
            name="institution",
            field=models.ForeignKey(
                help_text="Institution this record belongs to",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="%(class)s_records",
                to="core.institution",
                verbose_name="institution",
            ),
        ),
        migrations.AddField(
            model_name="incidentreport",
            name="institution",
            field=models.ForeignKey(
                help_text="Institution this record belongs to",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="%(class)s_records",
                to="core.institution",
                verbose_name="institution",
            ),
        ),
        migrations.AddField(
            model_name="incidentreport",
            name="reported_by",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="reported_incidents",
                to=settings.AUTH_USER_MODEL,
                verbose_name="reported by",
            ),
        ),
        migrations.AddField(
            model_name="incidentreport",
            name="students_affected",
            field=models.ManyToManyField(
                blank=True,
                related_name="transport_incidents",
                to="academics.student",
                verbose_name="students affected",
            ),
        ),
        migrations.AddField(
            model_name="maintenancerecord",
            name="institution",
            field=models.ForeignKey(
                help_text="Institution this record belongs to",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="%(class)s_records",
                to="core.institution",
                verbose_name="institution",
            ),
        ),
        migrations.AddField(
            model_name="route",
            name="institution",
            field=models.ForeignKey(
                help_text="Institution this record belongs to",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="%(class)s_records",
                to="core.institution",
                verbose_name="institution",
            ),
        ),
        migrations.AddField(
            model_name="routeschedule",
            name="academic_session",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="transport_schedules",
                to="academics.academicsession",
                verbose_name="academic session",
            ),
        ),
        migrations.AddField(
            model_name="routeschedule",
            name="attendant",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="route_schedules",
                to="transport.attendant",
                verbose_name="attendant",
            ),
        ),
        migrations.AddField(
            model_name="routeschedule",
            name="driver",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="route_schedules",
                to="transport.driver",
                verbose_name="driver",
            ),
        ),
        migrations.AddField(
            model_name="routeschedule",
            name="institution",
            field=models.ForeignKey(
                help_text="Institution this record belongs to",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="%(class)s_records",
                to="core.institution",
                verbose_name="institution",
            ),
        ),
        migrations.AddField(
            model_name="routeschedule",
            name="route",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="route_schedules",
                to="transport.route",
                verbose_name="route",
            ),
        ),
        migrations.AddField(
            model_name="incidentreport",
            name="route_schedule",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="incident_reports",
                to="transport.routeschedule",
                verbose_name="route schedule",
            ),
        ),
        migrations.AddField(
            model_name="routestop",
            name="institution",
            field=models.ForeignKey(
                help_text="Institution this record belongs to",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="%(class)s_records",
                to="core.institution",
                verbose_name="institution",
            ),
        ),
        migrations.AddField(
            model_name="routestop",
            name="route",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="stops",
                to="transport.route",
                verbose_name="route",
            ),
        ),
        migrations.AddField(
            model_name="transportallocation",
            name="drop_stop",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="drop_allocations",
                to="transport.routestop",
                verbose_name="drop stop",
            ),
        ),
        migrations.AddField(
            model_name="transportallocation",
            name="institution",
            field=models.ForeignKey(
                help_text="Institution this record belongs to",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="%(class)s_records",
                to="core.institution",
                verbose_name="institution",
            ),
        ),
        migrations.AddField(
            model_name="transportallocation",
            name="pickup_stop",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="pickup_allocations",
                to="transport.routestop",
                verbose_name="pickup stop",
            ),
        ),
        migrations.AddField(
            model_name="transportallocation",
            name="route_schedule",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="student_allocations",
                to="transport.routeschedule",
                verbose_name="route schedule",
            ),
        ),
        migrations.AddField(
            model_name="transportallocation",
            name="student",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="transport_allocations",
                to="academics.student",
                verbose_name="student",
            ),
        ),
        migrations.AddField(
            model_name="vehicle",
            name="institution",
            field=models.ForeignKey(
                help_text="Institution this record belongs to",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="%(class)s_records",
                to="core.institution",
                verbose_name="institution",
            ),
        ),
        migrations.AddField(
            model_name="routeschedule",
            name="vehicle",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="route_schedules",
                to="transport.vehicle",
                verbose_name="vehicle",
            ),
        ),
        migrations.AddField(
            model_name="maintenancerecord",
            name="vehicle",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="maintenance_records",
                to="transport.vehicle",
                verbose_name="vehicle",
            ),
        ),
        migrations.AddField(
            model_name="fuelrecord",
            name="vehicle",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="fuel_records",
                to="transport.vehicle",
                verbose_name="vehicle",
            ),
        ),
        migrations.AddIndex(
            model_name="driver",
            index=models.Index(
                fields=["license_expiry", "status"],
                name="transport_d_license_c83a45_idx",
            ),
        ),
        migrations.AddIndex(
            model_name="route",
            index=models.Index(
                fields=["code", "is_active"], name="transport_r_code_a8c2c8_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="incidentreport",
            index=models.Index(
                fields=["incident_type", "severity"],
                name="transport_i_inciden_806f02_idx",
            ),
        ),
        migrations.AddIndex(
            model_name="incidentreport",
            index=models.Index(
                fields=["date", "route_schedule"], name="transport_i_date_1072bb_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="routestop",
            index=models.Index(
                fields=["route", "sequence"], name="transport_r_route_i_61ee45_idx"
            ),
        ),
        migrations.AlterUniqueTogether(
            name="routestop",
            unique_together={("route", "sequence")},
        ),
        migrations.AddIndex(
            model_name="transportallocation",
            index=models.Index(
                fields=["student", "status"], name="transport_t_student_f4f0d8_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="transportallocation",
            index=models.Index(
                fields=["route_schedule", "status"],
                name="transport_t_route_s_97e92c_idx",
            ),
        ),
        migrations.AddIndex(
            model_name="transportallocation",
            index=models.Index(
                fields=["start_date", "end_date"], name="transport_t_start_d_d7851b_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="vehicle",
            index=models.Index(
                fields=["vehicle_type", "status"], name="transport_v_vehicle_d11d45_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="vehicle",
            index=models.Index(
                fields=["insurance_expiry"], name="transport_v_insuran_1ec231_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="vehicle",
            index=models.Index(
                fields=["fitness_expiry"], name="transport_v_fitness_35c29c_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="routeschedule",
            index=models.Index(
                fields=["route", "academic_session"],
                name="transport_r_route_i_79e5a7_idx",
            ),
        ),
        migrations.AddIndex(
            model_name="routeschedule",
            index=models.Index(
                fields=["vehicle", "status"], name="transport_r_vehicle_1ae38d_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="routeschedule",
            index=models.Index(
                fields=["driver", "status"], name="transport_r_driver__a3c5ec_idx"
            ),
        ),
        migrations.AlterUniqueTogether(
            name="routeschedule",
            unique_together={("route", "vehicle", "academic_session")},
        ),
        migrations.AddIndex(
            model_name="maintenancerecord",
            index=models.Index(
                fields=["vehicle", "date"], name="transport_m_vehicle_4bb69e_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="maintenancerecord",
            index=models.Index(
                fields=["maintenance_type", "date"],
                name="transport_m_mainten_993dd9_idx",
            ),
        ),
        migrations.AddIndex(
            model_name="fuelrecord",
            index=models.Index(
                fields=["vehicle", "date"], name="transport_f_vehicle_07d50f_idx"
            ),
        ),
    ]
