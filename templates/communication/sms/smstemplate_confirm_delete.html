{% extends 'base.html' %}
{% load static %}

{% block title %}Delete SMS Template - {{ sms_template.name }}{% endblock %}

{% block extra_css %}
<style>
.delete-confirmation-container {
    max-width: 600px;
    margin: 0 auto;
}

.delete-confirmation-card {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    border: 1px solid #e9ecef;
}

.warning-header {
    text-align: center;
    margin-bottom: 2rem;
}

.warning-icon {
    font-size: 4rem;
    color: #dc3545;
    margin-bottom: 1rem;
}

.warning-title {
    color: #dc3545;
    font-weight: 600;
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
}

.warning-text {
    color: #6c757d;
    margin-bottom: 0;
}

.template-details {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 1.5rem;
    margin-bottom: 2rem;
    border-left: 4px solid #17a2b8;
}

.detail-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 0;
    border-bottom: 1px solid #e9ecef;
}

.detail-item:last-child {
    border-bottom: none;
}

.detail-label {
    font-weight: 500;
    color: #2c3e50;
}

.detail-value {
    color: #6c757d;
}

.content-preview {
    background: #e9ecef;
    border-radius: 6px;
    padding: 1rem;
    margin-top: 1rem;
    font-family: monospace;
    font-size: 0.875rem;
    color: #495057;
    word-break: break-word;
}

.consequences-alert {
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 2rem;
}

.consequences-alert .alert-icon {
    color: #856404;
    margin-right: 0.5rem;
}

.consequences-list {
    margin: 0.5rem 0 0 0;
    padding-left: 1.5rem;
}

.consequences-list li {
    color: #856404;
    margin-bottom: 0.25rem;
}

.form-actions {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
}

@media (max-width: 768px) {
    .delete-confirmation-card {
        padding: 1.5rem;
    }

    .form-actions {
        flex-direction: column;
    }

    .form-actions .btn {
        width: 100%;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="container-fluid delete-confirmation-container">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'users:dashboard' %}">Home</a></li>
            <li class="breadcrumb-item"><a href="{% url 'communication:smstemplate_list' %}">SMS Templates</a></li>
            <li class="breadcrumb-item"><a href="#">{{ sms_template.name }}</a></li>
            <li class="breadcrumb-item active" aria-current="page">Delete</li>
        </ol>
    </nav>

    <!-- Delete Confirmation Card -->
    <div class="delete-confirmation-card">
        <!-- Warning Header -->
        <div class="warning-header">
            <div class="warning-icon">
                <i class="bi bi-exclamation-triangle-fill"></i>
            </div>
            <h1 class="warning-title">Delete SMS Template</h1>
            <p class="warning-text">
                Are you sure you want to delete the SMS template "<strong>{{ sms_template.name }}</strong>"?
            </p>
        </div>

        <!-- Template Details -->
        <div class="template-details">
            <h5 class="mb-3">
                <i class="bi bi-info-circle text-primary me-2"></i>
                SMS Template Details
            </h5>

            <div class="detail-item">
                <span class="detail-label">Name:</span>
                <span class="detail-value">{{ sms_template.name }}</span>
            </div>

            <div class="detail-item">
                <span class="detail-label">Status:</span>
                <span class="detail-value">
                    <span class="badge bg-{{ sms_template.is_active|yesno:'success,danger' }}">
                        {{ sms_template.is_active|yesno:'Active,Inactive' }}
                    </span>
                </span>
            </div>

            <div class="detail-item">
                <span class="detail-label">Character Count:</span>
                <span class="detail-value">{{ sms_template.content|length }}/160</span>
            </div>

            <div class="detail-item">
                <span class="detail-label">Created:</span>
                <span class="detail-value">{{ sms_template.created_at|date:"M d, Y H:i" }}</span>
            </div>

            {% if sms_template.content %}
            <div class="mt-3">
                <strong class="detail-label">Content Preview:</strong>
                <div class="content-preview">
                    {{ sms_template.content|truncatechars:100 }}
                </div>
            </div>
            {% endif %}

            {% if sms_template.variables %}
            <div class="mt-3">
                <strong class="detail-label">Variables:</strong>
                <div class="content-preview">
                    {{ sms_template.variables|truncatechars:100 }}
                </div>
            </div>
            {% endif %}
        </div>

        <!-- Consequences Alert -->
        <div class="consequences-alert">
            <div class="d-flex align-items-start">
                <i class="bi bi-exclamation-triangle-fill alert-icon"></i>
                <div>
                    <strong>Warning:</strong> This action cannot be undone. Deleting this SMS template will:
                    <ul class="consequences-list">
                        <li>Permanently remove the SMS template and all its settings</li>
                        <li>Prevent using this template for future SMS messages</li>
                        <li>Affect any automated systems using this template</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Confirmation Form -->
        <form method="post">
            {% csrf_token %}

            <div class="form-actions">
                <a href="{% url 'communication:smstemplate_list' %}" class="btn btn-outline-secondary">
                    <i class="bi bi-x-circle me-2"></i>
                    Cancel
                </a>

                <button type="submit" class="btn btn-danger">
                    <i class="bi bi-trash me-2"></i>
                    Yes, Delete SMS Template
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
