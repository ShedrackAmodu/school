<!-- templates/academics/teachers/teacher_detail.html -->
{% extends 'academics/base/base.html' %}
{% load static i18n %}

{% block title %}
    {{ teacher.user.get_full_name }} - {% trans "Teacher Profile" %}
{% endblock %}

{% block page_title %}
    {{ teacher.user.get_full_name }}
{% endblock %}

{% block breadcrumb_items %}
<li class="breadcrumb-item"><a href="{% url 'academics:dashboard' %}">{% trans "Academics" %}</a></li>
<li class="breadcrumb-item"><a href="{% url 'academics:teacher_list' %}">{% trans "Teachers" %}</a></li>
<li class="breadcrumb-item active" aria-current="page">{{ teacher.user.get_full_name }}</li>
{% endblock %}

{% block page_actions %}
<div class="page-actions">
    <div class="btn-group" role="group">
        {% if user.is_staff or user.teacher_profile == teacher %}
        <a href="{% url 'academics:teacher_update' teacher.pk %}" class="btn btn-outline-warning">
            <i class="bi bi-pencil me-1"></i> {% trans "Edit Profile" %}
        </a>
        {% endif %}
        <button type="button" class="btn btn-outline-primary" onclick="window.print()">
            <i class="bi bi-printer me-1"></i> {% trans "Print" %}
        </button>
        <a href="{% url 'academics:timetable_teacher' %}" class="btn btn-outline-info">
            <i class="bi bi-calendar-week me-1"></i> {% trans "View Timetable" %}
        </a>
        <a href="{% url 'academics:teacher_list' %}" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left me-1"></i> {% trans "Back to Teachers" %}
        </a>
    </div>
</div>
{% endblock %}

{% block content %}
<style>
.teacher-detail-container {
    font-family: 'Inter', sans-serif;
}

.teacher-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 0.75rem;
    padding: 2rem;
    margin-bottom: 2rem;
    position: relative;
    overflow: hidden;
}

.teacher-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.1);
}

.teacher-profile {
    display: flex;
    align-items: center;
    gap: 2rem;
    position: relative;
    z-index: 2;
}

.teacher-avatar {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    border: 4px solid rgba(255, 255, 255, 0.3);
    flex-shrink: 0;
}

.teacher-basic-info {
    flex-grow: 1;
}

.teacher-name {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
}

.teacher-title {
    font-size: 1.2rem;
    opacity: 0.9;
    margin-bottom: 1rem;
}

.teacher-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
    margin-bottom: 1rem;
}

.meta-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1rem;
    opacity: 0.9;
}

.teacher-status-badges {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.stat-card {
    background: #fff;
    border: 1px solid #e9ecef;
    border-radius: 0.75rem;
    padding: 1.5rem;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    transition: transform 0.2s ease;
}

.stat-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.stat-number {
    font-size: 2rem;
    font-weight: 700;
    display: block;
    line-height: 1;
    margin-bottom: 0.5rem;
}

.stat-label {
    font-size: 0.875rem;
    color: #6c757d;
    font-weight: 500;
}

.stat-trend {
    font-size: 0.75rem;
    margin-top: 0.5rem;
}

.trend-up { color: #28a745; }
.trend-down { color: #dc3545; }
.trend-neutral { color: #6c757d; }

.info-card {
    background: #fff;
    border: 1px solid #e9ecef;
    border-radius: 0.75rem;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.info-card .card-header {
    background: none;
    border-bottom: 2px solid #e9ecef;
    padding: 0 0 1rem 0;
    margin-bottom: 1rem;
}

.info-card .card-title {
    color: #495057;
    font-weight: 600;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    margin: 1rem 0;
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.info-label {
    font-size: 0.875rem;
    color: #6c757d;
    font-weight: 500;
}

.info-value {
    font-weight: 600;
    color: #212529;
}

.assignments-table {
    width: 100%;
    border-collapse: collapse;
    margin: 1rem 0;
}

.assignments-table th {
    background: #f8f9fa;
    padding: 1rem;
    text-align: left;
    font-weight: 600;
    color: #495057;
    border-bottom: 2px solid #e9ecef;
}

.assignments-table td {
    padding: 1rem;
    border-bottom: 1px solid #e9ecef;
    vertical-align: middle;
}

.assignments-table tr:hover {
    background: #f8f9fa;
}

.class-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.class-icon {
    width: 40px;
    height: 40px;
    border-radius: 0.5rem;
    background: #e9ecef;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
    color: #495057;
    flex-shrink: 0;
}

.class-details {
    flex-grow: 1;
}

.class-name {
    font-weight: 600;
    color: #212529;
    margin-bottom: 0.25rem;
}

.class-meta {
    font-size: 0.875rem;
    color: #6c757d;
}

.subject-badge {
    background: #e7f1ff;
    color: #0d6efd;
    padding: 0.375rem 0.75rem;
    border-radius: 0.375rem;
    font-size: 0.875rem;
    font-weight: 500;
}

.periods-badge {
    background: #fff3cd;
    color: #856404;
    padding: 0.375rem 0.75rem;
    border-radius: 0.375rem;
    font-size: 0.875rem;
    font-weight: 500;
}

.materials-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
    margin: 1.5rem 0;
}

.material-card {
    background: #fff;
    border: 1px solid #e9ecef;
    border-radius: 0.75rem;
    padding: 1.5rem;
    transition: transform 0.2s ease;
}

.material-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.material-header {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    margin-bottom: 1rem;
}

.material-type-icon {
    width: 50px;
    height: 50px;
    border-radius: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    flex-shrink: 0;
}

.type-textbook { background: #e3f2fd; color: #1976d2; }
.type-worksheet { background: #f3e5f5; color: #7b1fa2; }
.type-presentation { background: #e8f5e8; color: #388e3c; }
.type-video { background: #fff3e0; color: #f57c00; }
.type-document { background: #e0f2f1; color: #00796b; }

.material-title {
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: #212529;
    line-height: 1.3;
}

.material-description {
    color: #6c757d;
    font-size: 0.875rem;
    line-height: 1.4;
    margin-bottom: 1rem;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.material-meta {
    display: flex;
    justify-content: between;
    align-items: center;
    margin-bottom: 1rem;
}

.material-class {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: #6c757d;
}

.material-stats {
    display: flex;
    gap: 1rem;
    font-size: 0.75rem;
    color: #6c757d;
}

.material-actions {
    display: flex;
    gap: 0.5rem;
}

.timetable-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin: 1.5rem 0;
}

.timetable-day {
    background: #f8f9fa;
    border-radius: 0.5rem;
    padding: 1rem;
}

.day-header {
    font-weight: 600;
    color: #495057;
    margin-bottom: 0.75rem;
    text-align: center;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid #e9ecef;
}

.period-list {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.period-item {
    background: #fff;
    border: 1px solid #e9ecef;
    border-radius: 0.375rem;
    padding: 0.75rem;
    font-size: 0.875rem;
}

.period-time {
    font-weight: 600;
    color: #495057;
    margin-bottom: 0.25rem;
}

.period-subject {
    color: #0d6efd;
    font-weight: 500;
}

.period-class {
    color: #6c757d;
    font-size: 0.75rem;
}

.quick-actions {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin: 1.5rem 0;
}

.action-card {
    background: #fff;
    border: 1px solid #e9ecef;
    border-radius: 0.5rem;
    padding: 1.5rem;
    text-align: center;
    text-decoration: none;
    color: inherit;
    transition: all 0.3s ease;
}

.action-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    text-decoration: none;
    color: inherit;
    border-color: #0d6efd;
}

.action-icon {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: #e7f1ff;
    color: #0d6efd;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    margin: 0 auto 1rem auto;
}

.action-title {
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: #212529;
}

.action-description {
    font-size: 0.875rem;
    color: #6c757d;
    margin: 0;
}

.department-info {
    background: #e7f3ff;
    border: 1px solid #b3d9ff;
    border-radius: 0.5rem;
    padding: 1rem;
    margin: 1rem 0;
    display: flex;
    align-items: center;
    gap: 1rem;
}

.department-icon {
    width: 50px;
    height: 50px;
    border-radius: 0.5rem;
    background: #0d6efd;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    flex-shrink: 0;
}

.department-details h6 {
    margin-bottom: 0.25rem;
    color: #212529;
}

.department-details p {
    margin-bottom: 0;
    color: #6c757d;
    font-size: 0.875rem;
}

@media print {
    .page-actions,
    .sidebar,
    .navigation {
        display: none !important;
    }
    
    .teacher-header {
        background: #fff !important;
        color: #000 !important;
        border: 2px solid #000;
    }
    
    .stat-card,
    .info-card {
        border: 1px solid #000;
        box-shadow: none;
    }
    
    body {
        font-size: 12pt;
        line-height: 1.4;
    }
    
    .nav-tabs {
        display: none !important;
    }
    
    .tab-pane {
        display: block !important;
    }
}

@media (max-width: 768px) {
    .teacher-profile {
        flex-direction: column;
        text-align: center;
        gap: 1rem;
    }
    
    .teacher-meta {
        justify-content: center;
    }
    
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
    }
    
    .info-grid {
        grid-template-columns: 1fr;
    }
    
    .assignments-table {
        font-size: 0.875rem;
    }
    
    .materials-grid {
        grid-template-columns: 1fr;
    }
    
    .timetable-grid {
        grid-template-columns: 1fr;
    }
    
    .page-actions .btn-group {
        flex-direction: column;
        width: 100%;
    }
    
    .page-actions .btn {
        margin-bottom: 0.5rem;
    }
}

.empty-state {
    text-align: center;
    padding: 3rem 1rem;
    color: #6c757d;
}

.empty-state-icon {
    font-size: 4rem;
    color: #dee2e6;
    margin-bottom: 1rem;
}

.teacher-bio {
    line-height: 1.6;
    color: #495057;
    margin: 1rem 0;
}

.tab-content {
    margin-top: 1rem;
}

.nav-tabs .nav-link {
    color: #495057;
    font-weight: 500;
    padding: 0.75rem 1.5rem;
    border: none;
    border-bottom: 2px solid transparent;
}

.nav-tabs .nav-link.active {
    color: #0d6efd;
    background: none;
    border-color: #0d6efd;
}

.nav-tabs .nav-link:hover {
    border-color: #dee2e6;
}

.qualification-badge {
    font-size: 0.875rem;
    padding: 0.375rem 0.75rem;
    border-radius: 0.375rem;
    background: #e7f3ff;
    color: #0d6efd;
    font-weight: 500;
}

.teacher-type-badge {
    font-size: 0.875rem;
    padding: 0.375rem 0.75rem;
    border-radius: 0.375rem;
}

.badge-full_time { background: #28a745; color: white; }
.badge-part_time { background: #ffc107; color: #212529; }
.badge-visiting { background: #17a2b8; color: white; }
.badge-contract { background: #6c757d; color: white; }
</style>

<div class="teacher-detail-container">
    <!-- Teacher Header -->
    <div class="teacher-header">
        <div class="teacher-profile">
            {% if teacher.photo %}
            <img src="{{ teacher.photo.url }}" alt="{{ teacher.user.get_full_name }}" class="teacher-avatar">
            {% else %}
            <div class="teacher-avatar bg-light text-dark d-flex align-items-center justify-content-center">
                {{ teacher.user.get_initials }}
            </div>
            {% endif %}
            <div class="teacher-basic-info">
                <h1 class="teacher-name">{{ teacher.user.get_full_name }}</h1>
                <div class="teacher-title">{{ teacher.specialization|default:"Teacher" }}</div>
                
                <div class="teacher-meta">
                    <div class="meta-item">
                        <i class="bi bi-person-badge"></i>
                        {{ teacher.teacher_id }}
                    </div>
                    <div class="meta-item">
                        <i class="bi bi-briefcase"></i>
                        {{ teacher.employee_id }}
                    </div>
                    <div class="meta-item">
                        <i class="bi bi-calendar"></i>
                        {{ teacher.joining_date|date:"F j, Y" }}
                    </div>
                    <div class="meta-item">
                        <i class="bi bi-award"></i>
                        {{ teacher.get_qualification_display }}
                    </div>
                </div>
                
                <div class="teacher-status-badges">
                    <span class="badge teacher-type-badge badge-{{ teacher.teacher_type }}">
                        {{ teacher.get_teacher_type_display }}
                    </span>
                    <span class="badge bg-info">
                        <i class="bi bi-clock me-1"></i> {{ teacher.experience_years }} {% trans "years experience" %}
                    </span>
                    {% if teacher.is_class_teacher %}
                    <span class="badge bg-primary">
                        <i class="bi bi-people me-1"></i> {% trans "Class Teacher" %}
                    </span>
                    {% endif %}
                    {% if teacher.department %}
                    <span class="badge bg-secondary">
                        <i class="bi bi-building me-1"></i> {{ teacher.department.name }}
                    </span>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Statistics -->
    <div class="stats-grid">
        <div class="stat-card">
            <span class="stat-number">{{ subject_count }}</span>
            <span class="stat-label">{% trans "Subjects" %}</span>
            <div class="stat-trend trend-up">
                <i class="bi bi-journal-check me-1"></i> {% trans "Teaching" %}
            </div>
        </div>
        
        <div class="stat-card">
            <span class="stat-number">{{ class_count }}</span>
            <span class="stat-label">{% trans "Classes" %}</span>
            <div class="stat-trend trend-neutral">
                <i class="bi bi-people me-1"></i> {% trans "Assigned" %}
            </div>
        </div>
        
        <div class="stat-card">
            <span class="stat-number">{{ student_count }}</span>
            <span class="stat-label">{% trans "Students" %}</span>
            <div class="stat-trend trend-up">
                <i class="bi bi-person me-1"></i> {% trans "Teaching" %}
            </div>
        </div>
        
        <div class="stat-card">
            <span class="stat-number">{{ material_count }}</span>
            <span class="stat-label">{% trans "Materials" %}</span>
            <div class="stat-trend trend-up">
                <i class="bi bi-file-earmark me-1"></i> {% trans "Created" %}
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
        <a href="{% url 'academics:timetable_teacher' %}" class="action-card">
            <div class="action-icon">
                <i class="bi bi-calendar-week"></i>
            </div>
            <div class="action-title">{% trans "View Timetable" %}</div>
            <p class="action-description">{% trans "Check weekly schedule" %}</p>
        </a>
        
        <a href="{% url 'academics:material_create' %}" class="action-card">
            <div class="action-icon">
                <i class="bi bi-plus-circle"></i>
            </div>
            <div class="action-title">{% trans "Add Material" %}</div>
            <p class="action-description">{% trans "Create learning resources" %}</p>
        </a>
        
        <!-- <a href="{% url 'academics:subject_assignment' %}?teacher={{ teacher.pk }}" class="action-card">
            <div class="action-icon">
                <i class="bi bi-journal-plus"></i>
            </div>
            <div class="action-title">{% trans "Assign Subject" %}</div>
            <p class="action-description">{% trans "Add teaching assignments" %}</p>
        </a> -->
        
        <a href="#" class="action-card" onclick="contactTeacher()">
            <div class="action-icon">
                <i class="bi bi-envelope"></i>
            </div>
            <div class="action-title">{% trans "Contact" %}</div>
            <p class="action-description">{% trans "Send message" %}</p>
        </a>
    </div>

    <!-- Navigation Tabs -->
    <ul class="nav nav-tabs" id="teacherTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab">
                <i class="bi bi-person me-1"></i> {% trans "Profile" %}
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="assignments-tab" data-bs-toggle="tab" data-bs-target="#assignments" type="button" role="tab">
                <i class="bi bi-journal-check me-1"></i> {% trans "Assignments" %}
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="timetable-tab" data-bs-toggle="tab" data-bs-target="#timetable" type="button" role="tab">
                <i class="bi bi-calendar-week me-1"></i> {% trans "Timetable" %}
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="materials-tab" data-bs-toggle="tab" data-bs-target="#materials" type="button" role="tab">
                <i class="bi bi-journal me-1"></i> {% trans "Materials" %}
            </button>
        </li>
    </ul>

    <div class="tab-content" id="teacherTabsContent">
        <!-- Profile Tab -->
        <div class="tab-pane fade show active" id="profile" role="tabpanel">
            <div class="info-card">
                <div class="card-header">
                    <h5 class="card-title">
                        <i class="bi bi-person"></i> {% trans "Professional Information" %}
                    </h5>
                </div>
                
                {% if teacher.department %}
                <div class="department-info">
                    <div class="department-icon">
                        <i class="bi bi-building"></i>
                    </div>
                    <div class="department-details">
                        <h6>{{ teacher.department.name }}</h6>
                        <p>{{ teacher.department.code }} • 
                           {% if teacher.department.head_of_department == teacher %}
                           {% trans "Head of Department" %}
                           {% else %}
                           {{ teacher.department.teachers.count }} teachers
                           {% endif %}
                        </p>
                    </div>
                </div>
                {% endif %}

                <div class="info-grid">
                    <div class="info-item">
                        <span class="info-label">{% trans "Full Name" %}</span>
                        <span class="info-value">{{ teacher.user.get_full_name }}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">{% trans "Teacher ID" %}</span>
                        <span class="info-value">{{ teacher.teacher_id }}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">{% trans "Employee ID" %}</span>
                        <span class="info-value">{{ teacher.employee_id }}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">{% trans "Qualification" %}</span>
                        <span class="info-value">
                            <span class="qualification-badge">
                                {{ teacher.get_qualification_display }}
                            </span>
                        </span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">{% trans "Teacher Type" %}</span>
                        <span class="info-value">
                            <span class="badge teacher-type-badge badge-{{ teacher.teacher_type }}">
                                {{ teacher.get_teacher_type_display }}
                            </span>
                        </span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">{% trans "Specialization" %}</span>
                        <span class="info-value">{{ teacher.specialization|default:"Not specified" }}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">{% trans "Joining Date" %}</span>
                        <span class="info-value">{{ teacher.joining_date|date:"F j, Y" }}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">{% trans "Experience" %}</span>
                        <span class="info-value">{{ teacher.experience_years }} {% trans "years" %}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">{% trans "Class Teacher" %}</span>
                        <span class="info-value">
                            {% if teacher.is_class_teacher %}
                            <span class="badge bg-success">{% trans "Yes" %}</span>
                            {% else %}
                            <span class="badge bg-secondary">{% trans "No" %}</span>
                            {% endif %}
                        </span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">{% trans "Department" %}</span>
                        <span class="info-value">
                            {% if teacher.department %}
                            {{ teacher.department.name }}
                            {% else %}
                            <span class="text-muted">{% trans "Not assigned" %}</span>
                            {% endif %}
                        </span>
                    </div>
                </div>

                <!-- Biography -->
                {% if teacher.bio %}
                <div class="teacher-bio">
                    <h6>{% trans "Biography" %}</h6>
                    {{ teacher.bio|linebreaks }}
                </div>
                {% endif %}
            </div>

            <!-- Contact Information -->
            <div class="info-card">
                <div class="card-header">
                    <h5 class="card-title">
                        <i class="bi bi-telephone"></i> {% trans "Contact Information" %}
                    </h5>
                </div>
                
                <div class="info-grid">
                    <div class="info-item">
                        <span class="info-label">{% trans "Email" %}</span>
                        <span class="info-value">{{ teacher.user.email }}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">{% trans "Mobile" %}</span>
                        <span class="info-value">
                            {% if teacher.user.mobile %}
                                {{ teacher.user.mobile }}
                            {% else %}
                                <span class="text-muted">-</span>
                            {% endif %}
                        </span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">{% trans "Phone" %}</span>
                        <span class="info-value">
                            {% if teacher.phone %}
                                {{ teacher.phone }}
                            {% else %}
                                <span class="text-muted">-</span>
                            {% endif %}
                        </span>
                    </div>
                </div>

                <!-- Address -->
                <div class="info-item mt-3">
                    <span class="info-label">{% trans "Address" %}</span>
                    <span class="info-value">
                        {% if teacher.address %}
                            {{ teacher.address }}<br>
                            {{ teacher.city }}, {{ teacher.state }} {{ teacher.postal_code }}<br>
                            {{ teacher.country }}
                        {% else %}
                            <span class="text-muted">{% trans "No address provided" %}</span>
                        {% endif %}
                    </span>
                </div>
            </div>

            <!-- Personal Information -->
            <div class="info-card">
                <div class="card-header">
                    <h5 class="card-title">
                        <i class="bi bi-info-circle"></i> {% trans "Personal Information" %}
                    </h5>
                </div>
                
                <div class="info-grid">
                    {% if teacher.date_of_birth %}
                    <div class="info-item">
                        <span class="info-label">{% trans "Date of Birth" %}</span>
                        <span class="info-value">{{ teacher.date_of_birth|date:"F j, Y" }}</span>
                    </div>
                    {% endif %}
                    <div class="info-item">
                        <span class="info-label">{% trans "Gender" %}</span>
                        <span class="info-value">{{ teacher.get_gender_display }}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">{% trans "Nationality" %}</span>
                        <span class="info-value">{{ teacher.nationality|default:"Not specified" }}</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Assignments Tab -->
        <div class="tab-pane fade" id="assignments" role="tabpanel">
            <div class="info-card">
                <div class="card-header">
                    <h5 class="card-title">
                        <i class="bi bi-journal-check"></i> {% trans "Current Teaching Assignments" %}
                    </h5>
                </div>
                
                {% if current_assignments %}
                <div class="table-responsive">
                    <table class="assignments-table">
                        <thead>
                            <tr>
                                <th>{% trans "Class" %}</th>
                                <th>{% trans "Subject" %}</th>
                                <th>{% trans "Periods/Week" %}</th>
                                <th>{% trans "Academic Session" %}</th>
                                <th>{% trans "Students" %}</th>
                                <th>{% trans "Status" %}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for assignment in current_assignments %}
                            <tr>
                                <td>
                                    <div class="class-info">
                                        <div class="class-icon">
                                            <i class="bi bi-people"></i>
                                        </div>
                                        <div class="class-details">
                                            <div class="class-name">{{ assignment.class_assigned.name }}</div>
                                            <div class="class-meta">{{ assignment.class_assigned.grade_level.name }}</div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <span class="subject-badge">{{ assignment.subject.name }}</span>
                                </td>
                                <td>
                                    <span class="periods-badge">{{ assignment.periods_per_week }}</span>
                                </td>
                                <td>{{ assignment.academic_session.name }}</td>
                                <td>{{ assignment.class_assigned.current_student_count }}</td>
                                <td>
                                    <span class="badge bg-{% if assignment.is_primary_teacher %}success{% else %}info{% endif %}">
                                        {% if assignment.is_primary_teacher %}
                                        {% trans "Primary" %}
                                        {% else %}
                                        {% trans "Secondary" %}
                                        {% endif %}
                                    </span>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <div class="empty-state">
                    <div class="empty-state-icon">
                        <i class="bi bi-journal-x"></i>
                    </div>
                    <h5>{% trans "No Teaching Assignments" %}</h5>
                    <p class="mb-4">{% trans "This teacher is not currently assigned to any classes." %}</p>
                    {% if user.is_staff %}
                    <!-- <a href="{% url 'academics:subject_assignment' %}?teacher={{ teacher.pk }}" class="btn btn-primary">
                        <i class="bi bi-journal-plus me-1"></i> {% trans "Assign to Class" %}
                    </a> -->
                    {% endif %}
                </div>
                {% endif %}
            </div>

            <!-- Subjects Taught -->
            <div class="info-card">
                <div class="card-header">
                    <h5 class="card-title">
                        <i class="bi bi-journal-bookmark"></i> {% trans "Subjects Taught" %}
                    </h5>
                </div>
                
                {% if subjects_taught %}
                <div class="d-flex flex-wrap gap-2">
                    {% for subject in subjects_taught %}
                    <span class="subject-badge">
                        <i class="bi bi-journal-text me-1"></i>
                        {{ subject.name }} ({{ subject.code }})
                    </span>
                    {% endfor %}
                </div>
                {% else %}
                <p class="text-muted mb-0">{% trans "No subjects assigned" %}</p>
                {% endif %}
            </div>

            <!-- Class Teacher Responsibilities -->
            {% if homeroom_classes %}
            <div class="info-card">
                <div class="card-header">
                    <h5 class="card-title">
                        <i class="bi bi-people"></i> {% trans "Class Teacher Responsibilities" %}
                    </h5>
                </div>
                
                <div class="d-flex flex-wrap gap-3">
                    {% for class in homeroom_classes %}
                    <div class="class-info">
                        <div class="class-icon bg-primary text-white">
                            <i class="bi bi-people"></i>
                        </div>
                        <div class="class-details">
                            <div class="class-name">
                                <a href="{% url 'academics:class_detail' class.pk %}" class="text-decoration-none text-dark">
                                    {{ class.name }}
                                </a>
                            </div>
                            <div class="class-meta">
                                {{ class.grade_level.name }} • {{ class.current_student_count }} {% trans "Students" %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="empty-state">
                    <div class="empty-state-icon">
                        <i class="bi bi-people-fill"></i>
                    </div>
                    <h5>{% trans "No Class Teacher Responsibilities" %}</h5>
                    <p class="mb-4">{% trans "This teacher is not currently assigned as a class teacher." %}</p>
                </div>
                {% endif %}
            </div>
            {% endif %}
        </div>

        <!-- Timetable Tab -->
        <div class="tab-pane fade" id="timetable" role="tabpanel">
            <div class="info-card">
                <div class="card-header">
                    <h5 class="card-title">
                        <i class="bi bi-calendar-week"></i> {% trans "Teacher Timetable" %}
                    </h5>
                </div>
                {% if teacher_timetable %}
                <div class="timetable-grid">
                    {% for day, periods in teacher_timetable.items %}
                    <div class="timetable-day">
                        <div class="day-header">{{ day }}</div>
                        <div class="period-list">
                            {% for period in periods %}
                            <div class="period-item">
                                <div class="period-time">{{ period.start_time|time:"H:i" }} - {{ period.end_time|time:"H:i" }}</div>
                                <div class="period-subject">{{ period.subject.name }}</div>
                                <div class="period-class">{{ period.class_assigned.name }}</div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="empty-state">
                    <div class="empty-state-icon">
                        <i class="bi bi-calendar-x"></i>
                    </div>
                    <h5>{% trans "No Timetable Available" %}</h5>
                    <p class="mb-4">{% trans "The timetable for this teacher is not yet available." %}</p>
                    {% if user.is_staff %}
                    <a href="{% url 'academics:timetable_create' %}" class="btn btn-primary">
                        <i class="bi bi-plus-circle me-1"></i> {% trans "Create Timetable" %}
                    </a>
                    {% endif %}
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Materials Tab -->
        <div class="tab-pane fade" id="materials" role="tabpanel">
            <div class="info-card">
                <div class="card-header">
                    <h5 class="card-title">
                        <i class="bi bi-journal"></i> {% trans "Learning Materials" %}
                    </h5>
                </div>
                {% if learning_materials %}
                <div class="materials-grid">
                    {% for material in learning_materials %}
                    <div class="material-card">
                        <div class="material-header">
                            <div class="material-type-icon type-{{ material.material_type }}">
                                {% if material.material_type == 'textbook' %}<i class="bi bi-book"></i>
                                {% elif material.material_type == 'worksheet' %}<i class="bi bi-file-earmark-text"></i>
                                {% elif material.material_type == 'presentation' %}<i class="bi bi-file-earmark-ppt"></i>
                                {% elif material.material_type == 'video' %}<i class="bi bi-play-circle"></i>
                                {% elif material.material_type == 'document' %}<i class="bi bi-file-earmark"></i>
                                {% else %}<i class="bi bi-file-earmark"></i>{% endif %}
                            </div>
                            <div>
                                <h6 class="material-title">{{ material.title }}</h6>
                                <div class="material-class">
                                    <i class="bi bi-people"></i> {{ material.class_assigned.name }}
                                </div>
                            </div>
                        </div>
                        <p class="material-description">{{ material.description|default:"No description provided." }}</p>
                        <div class="material-meta">
                            <div class="material-stats">
                                <span><i class="bi bi-calendar"></i> {{ material.uploaded_at|date:"M j, Y" }}</span>
                                <span><i class="bi bi-eye"></i> {{ material.views }}</span>
                            </div>
                            <div class="material-actions">
                                <a href="{{ material.file.url }}" class="btn btn-sm btn-outline-primary" target="_blank">
                                    <i class="bi bi-download me-1"></i> {% trans "Download" %}
                                </a>
                                <a href="{% url 'academics:material_detail' material.pk %}" class="btn btn-sm btn-outline-secondary">
                                    <i class="bi bi-eye me-1"></i> {% trans "View" %}
                                </a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="empty-state">
                    <div class="empty-state-icon">
                        <i class="bi bi-journal-x"></i>
                    </div>
                    <h5>{% trans "No Learning Materials" %}</h5>
                    <p class="mb-4">{% trans "This teacher has not uploaded any learning materials yet." %}</p>
                    {% if user.is_staff or user.teacher_profile == teacher %}
                    <a href="{% url 'academics:material_create' %}" class="btn btn-primary">
                        <i class="bi bi-plus-circle me-1"></i> {% trans "Add New Material" %}
                    </a>
                    {% endif %}
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<script>
    function contactTeacher() {
        // Implement contact functionality, e.g., open a modal or redirect to a contact form
        alert('Contact functionality for {{ teacher.user.get_full_name }} will be implemented here.');
    }

    document.addEventListener('DOMContentLoaded', function() {
        var teacherTabs = new bootstrap.Tab(document.getElementById('profile-tab'));
        teacherTabs.show();
    });
</script>
{% endblock %}
