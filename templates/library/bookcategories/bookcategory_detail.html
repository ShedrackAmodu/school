<!-- templates/library/bookcategories/bookcategory_detail.html -->
{% extends 'base/base.html' %}
{% load static i18n %}

{% block title %}{{ category.name }} - {% trans "Category Details" %}{% endblock %}

{% block page_title %}{% trans "Category Details" %}{% endblock %}

{% block breadcrumb_items %}
<li class="breadcrumb-item"><a href="{% url 'users:dashboard' %}">{% trans "Home" %}</a></li>
<li class="breadcrumb-item"><a href="{% url 'library:dashboard' %}">{% trans "Library" %}</a></li>
<li class="breadcrumb-item"><a href="{% url 'library:bookcategory_list' %}">{% trans "Categories" %}</a></li>
<li class="breadcrumb-item active" aria-current="page">{{ category.name }}</li>
{% endblock %}

{% block extra_css %}
<style>
    /* Category Detail Specific Styles */
    .category-header-card {
        border-left: 4px solid #28a745;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    
    .category-header-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .category-stat-card {
        border-left: 4px solid;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        height: 100%;
    }
    
    .category-stat-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .stat-card-1 { border-left-color: #28a745; }
    .stat-card-2 { border-left-color: #17a2b8; }
    .stat-card-3 { border-left-color: #ffc107; }
    .stat-card-4 { border-left-color: #6f42c1; }
    
    .category-stat-number {
        font-size: 1.8rem;
        font-weight: 700;
        line-height: 1;
    }
    
    .category-stat-label {
        font-size: 0.875rem;
        color: #6c757d;
        font-weight: 500;
    }
    
    .category-stat-icon {
        font-size: 1.5rem;
        opacity: 0.8;
    }
    
    .category-icon-large {
        width: 80px;
        height: 80px;
        border-radius: 12px;
        background: linear-gradient(135deg, #28a745, #20c997);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 2rem;
        border: 3px solid white;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .book-item {
        border-left: 3px solid transparent;
        transition: all 0.2s ease;
        padding: 1rem;
    }
    
    .book-item:hover {
        border-left-color: #28a745;
        background-color: rgba(40, 167, 69, 0.05);
    }
    
    .book-cover-small {
        width: 50px;
        height: 65px;
        object-fit: cover;
        border-radius: 4px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .status-badge {
        font-size: 0.75rem;
        padding: 0.25rem 0.5rem;
    }
    
    .hierarchy-badge {
        font-size: 0.7rem;
        background-color: #d1ecf1;
        color: #0c5460;
        border: 1px solid #bee5eb;
    }
    
    .description-content {
        line-height: 1.6;
        max-height: 200px;
        overflow-y: auto;
    }
    
    .hierarchy-path {
        background-color: #e9ecef;
        border-radius: 0.375rem;
        padding: 0.75rem;
        font-family: monospace;
        font-size: 0.9rem;
        border-left: 4px solid #6f42c1;
    }
    
    .subcategory-card {
        border-left: 3px solid #17a2b8;
        transition: all 0.2s ease;
    }
    
    .subcategory-card:hover {
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .subcategory-icon {
        width: 40px;
        height: 40px;
        border-radius: 6px;
        background: linear-gradient(135deg, #17a2b8, #6f42c1);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1rem;
    }
    
    .timeline-item {
        border-left: 3px solid #28a745;
        padding-left: 1.5rem;
        position: relative;
        margin-bottom: 1.5rem;
    }
    
    .timeline-item::before {
        content: '';
        position: absolute;
        left: -8px;
        top: 0;
        width: 14px;
        height: 14px;
        border-radius: 50%;
        background-color: #28a745;
    }
    
    .breadcrumb-path {
        background-color: #f8f9fa;
        border-radius: 0.375rem;
        padding: 0.5rem 1rem;
        font-size: 0.9rem;
    }
    
    @media (max-width: 768px) {
        .category-stat-number {
            font-size: 1.5rem;
        }
        
        .category-icon-large {
            width: 60px;
            height: 60px;
            font-size: 1.5rem;
        }
        
        .book-cover-small {
            width: 40px;
            height: 52px;
        }
        
        .subcategory-icon {
            width: 35px;
            height: 35px;
            font-size: 0.9rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Category Header Section -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card category-header-card">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <div class="d-flex align-items-center mb-3">
                                <div class="category-icon-large me-4">
                                    <i class="bi bi-tag"></i>
                                </div>
                                <div>
                                    <h2 class="card-title mb-2">{{ category.name }}</h2>
                                    <div class="d-flex flex-wrap gap-2 align-items-center">
                                        <code class="h5 text-muted mb-0">{{ category.code }}</code>
                                        {% if not category.parent %}
                                        <span class="hierarchy-badge">{% trans "Top Level Category" %}</span>
                                        {% else %}
                                        <span class="badge bg-light text-dark">{% trans "Subcategory" %}</span>
                                        {% endif %}
                                        <span class="badge {% if category.status == 'active' %}bg-success{% else %}bg-secondary{% endif %}">
                                            {{ category.get_status_display }}
                                        </span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Hierarchy Path -->
                            <div class="hierarchy-path mb-3">
                                <small class="text-muted">{% trans "Full Category Path:" %}</small>
                                <div class="fw-bold">{{ category.hierarchy_path }}</div>
                            </div>
                            
                            {% if category.description %}
                            <div class="description-content">
                                <h6 class="text-muted mb-2">{% trans "Description:" %}</h6>
                                <p class="mb-0">{{ category.description|linebreaks }}</p>
                            </div>
                            {% endif %}
                        </div>
                        <div class="col-md-4 text-md-end">
                            <div class="btn-group mt-3 mt-md-0">
                                <a href="{% url 'library:bookcategory_update' category.pk %}" class="btn btn-success">
                                    <i class="bi bi-pencil me-1"></i> {% trans "Edit" %}
                                </a>
                                <a href="{% url 'library:bookcategory_list' %}" class="btn btn-outline-secondary">
                                    <i class="bi bi-arrow-left me-1"></i> {% trans "Back to List" %}
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Category Statistics -->
    <div class="row mb-4">
        <div class="col-xl-3 col-md-6 mb-3">
            <div class="card category-stat-card stat-card-1 h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <div class="category-stat-number text-success">{{ books.count }}</div>
                            <div class="category-stat-label">{% trans "Total Books" %}</div>
                        </div>
                        <div class="category-stat-icon text-success">
                            <i class="bi bi-book"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-xl-3 col-md-6 mb-3">
            <div class="card category-stat-card stat-card-2 h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <div class="category-stat-number text-info">{{ subcategories.count }}</div>
                            <div class="category-stat-label">{% trans "Subcategories" %}</div>
                        </div>
                        <div class="category-stat-icon text-info">
                            <i class="bi bi-folder"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-xl-3 col-md-6 mb-3">
            <div class="card category-stat-card stat-card-3 h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <div class="category-stat-number text-warning">{{ available_books_count }}</div>
                            <div class="category-stat-label">{% trans "Available Books" %}</div>
                        </div>
                        <div class="category-stat-icon text-warning">
                            <i class="bi bi-check-circle"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-xl-3 col-md-6 mb-3">
            <div class="card category-stat-card stat-card-4 h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <div class="category-stat-number text-primary">{{ total_borrow_count }}</div>
                            <div class="category-stat-label">{% trans "Total Times Borrowed" %}</div>
                        </div>
                        <div class="category-stat-icon text-primary">
                            <i class="bi bi-arrow-left-right"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main Content Area -->
    <div class="row">
        <!-- Left Column: Category Details and Hierarchy -->
        <div class="col-lg-4">
            <!-- Category Information -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-info-circle text-primary me-2"></i>
                        {% trans "Category Information" %}
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-6">
                            <small class="text-muted">{% trans "Category Code:" %}</small>
                            <div class="fw-bold">{{ category.code }}</div>
                        </div>
                        <div class="col-6">
                            <small class="text-muted">{% trans "Status:" %}</small>
                            <div>
                                <span class="badge {% if category.status == 'active' %}bg-success{% else %}bg-secondary{% endif %}">
                                    {{ category.get_status_display }}
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    {% if category.parent %}
                    <div class="mb-3">
                        <small class="text-muted">{% trans "Parent Category:" %}</small>
                        <div>
                            <a href="{% url 'library:bookcategory_detail' category.parent.pk %}" class="fw-bold text-decoration-none">
                                <i class="bi bi-folder me-1"></i>{{ category.parent.name }}
                            </a>
                        </div>
                    </div>
                    {% endif %}
                    
                    {% if category.description %}
                    <div class="mb-3">
                        <small class="text-muted">{% trans "Description:" %}</small>
                        <div class="small">{{ category.description }}</div>
                    </div>
                    {% endif %}
                    
                    <!-- Creation Timeline -->
                    <div class="timeline">
                        <div class="timeline-item">
                            <h6 class="mb-1">{% trans "Category Created" %}</h6>
                            <p class="mb-1 text-muted">{{ category.created_at|date:"F j, Y" }}</p>
                            <p class="small mb-0">{% trans "Category was added to the system" %}</p>
                        </div>
                        
                        {% if category.updated_at and category.updated_at != category.created_at %}
                        <div class="timeline-item">
                            <h6 class="mb-1">{% trans "Last Updated" %}</h6>
                            <p class="mb-1 text-muted">{{ category.updated_at|date:"F j, Y" }}</p>
                            <p class="small mb-0">{% trans "Category information was modified" %}</p>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <!-- Parent Category Breadcrumb -->
            {% if category.parent %}
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-arrow-up text-info me-2"></i>
                        {% trans "Parent Category" %}
                    </h5>
                </div>
                <div class="card-body">
                    <div class="breadcrumb-path">
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb mb-0">
                                <li class="breadcrumb-item">
                                    <a href="{% url 'library:bookcategory_detail' category.parent.pk %}">
                                        {{ category.parent.name }}
                                    </a>
                                </li>
                                <li class="breadcrumb-item active" aria-current="page">{{ category.name }}</li>
                            </ol>
                        </nav>
                    </div>
                    <div class="mt-2 text-center">
                        <a href="{% url 'library:bookcategory_detail' category.parent.pk %}" class="btn btn-sm btn-outline-primary">
                            <i class="bi bi-eye me-1"></i> {% trans "View Parent Category" %}
                        </a>
                    </div>
                </div>
            </div>
            {% endif %}
            
            <!-- Quick Actions -->
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-lightning-charge text-warning me-2"></i>
                        {% trans "Quick Actions" %}
                    </h5>
                </div>
                <div class="card-body">
                    <div class="d-grid gap-2">
                        <a href="{% url 'library:bookcategory_update' category.pk %}" class="btn btn-outline-success">
                            <i class="bi bi-pencil me-2"></i> {% trans "Edit Category" %}
                        </a>
                        <a href="{% url 'library:bookcategory_create' %}?parent={{ category.id }}" class="btn btn-outline-primary">
                            <i class="bi bi-plus-circle me-2"></i> {% trans "Add Subcategory" %}
                        </a>
                        <a href="{% url 'library:book_create' %}?category={{ category.id }}" class="btn btn-outline-info">
                            <i class="bi bi-book-plus me-2"></i> {% trans "Add Book to Category" %}
                        </a>
                        <button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#exportCategoryModal">
                            <i class="bi bi-download me-2"></i> {% trans "Export Category Data" %}
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Right Column: Books and Subcategories -->
        <div class="col-lg-8">
            <!-- Books in this Category -->
            <div class="card mb-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-book text-primary me-2"></i>
                        {% trans "Books in this Category" %}
                    </h5>
                    <span class="badge bg-primary rounded-pill">{{ books.count }}</span>
                </div>
                <div class="card-body p-0">
                    {% if books %}
                    <div class="table-responsive">
                        <table class="table table-hover mb-0">
                            <thead class="table-light">
                                <tr>
                                    <th>{% trans "Book" %}</th>
                                    <th>{% trans "Author" %}</th>
                                    <th>{% trans "Publisher" %}</th>
                                    <th class="text-center">{% trans "Status" %}</th>
                                    <th class="text-center">{% trans "Available" %}</th>
                                    <th class="text-center">{% trans "Actions" %}</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for book in books %}
                                <tr class="book-item">
                                    <td>
                                        <div class="d-flex align-items-center">
                                            {% if book.cover_image %}
                                            <img src="{{ book.cover_image.url }}" alt="{{ book.title }}" class="book-cover-small me-3">
                                            {% else %}
                                            <div class="book-cover-small bg-light d-flex align-items-center justify-content-center me-3">
                                                <i class="bi bi-book text-muted"></i>
                                            </div>
                                            {% endif %}
                                            <div>
                                                <strong>{{ book.title }}</strong>
                                                {% if book.edition %}
                                                <div class="text-muted small">{% trans "Edition" %} {{ book.edition }}</div>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </td>
                                    <td>{{ book.author_names|truncatewords:2 }}</td>
                                    <td>
                                        {% if book.publisher %}
                                        {{ book.publisher.name }}
                                        {% else %}
                                        <span class="text-muted">{% trans "Not specified" %}</span>
                                        {% endif %}
                                    </td>
                                    <td class="text-center">
                                        {% if book.book_status == 'available' %}
                                        <span class="badge bg-success status-badge">{% trans "Available" %}</span>
                                        {% elif book.book_status == 'borrowed' %}
                                        <span class="badge bg-warning status-badge">{% trans "Borrowed" %}</span>
                                        {% elif book.book_status == 'reserved' %}
                                        <span class="badge bg-info status-badge">{% trans "Reserved" %}</span>
                                        {% else %}
                                        <span class="badge bg-secondary status-badge">{{ book.get_book_status_display }}</span>
                                        {% endif %}
                                    </td>
                                    <td class="text-center">
                                        <span class="badge {% if book.available_copies > 0 %}bg-success{% else %}bg-danger{% endif %} rounded-pill">
                                            {{ book.available_copies }}/{{ book.total_copies }}
                                        </span>
                                    </td>
                                    <td class="text-center">
                                        <div class="btn-group btn-group-sm">
                                            <a href="{% url 'library:book_detail' book.pk %}" class="btn btn-outline-primary" title="{% trans 'View Details' %}">
                                                <i class="bi bi-eye"></i>
                                            </a>
                                            <a href="{% url 'library:book_update' book.pk %}" class="btn btn-outline-success" title="{% trans 'Edit Book' %}">
                                                <i class="bi bi-pencil"></i>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    {% else %}
                    <div class="text-center py-5 text-muted">
                        <i class="bi bi-book display-4 d-block mb-3"></i>
                        <h5>{% trans "No books found" %}</h5>
                        <p class="mb-0">{% trans "There are no books in this category yet." %}</p>
                        <a href="{% url 'library:book_create' %}?category={{ category.id }}" class="btn btn-primary mt-3">
                            <i class="bi bi-plus-circle me-2"></i> {% trans "Add First Book" %}
                        </a>
                    </div>
                    {% endif %}
                </div>
                {% if books.count > 5 %}
                <div class="card-footer text-center">
                    <a href="{% url 'library:book_list' %}?category={{ category.id }}" class="btn btn-outline-primary">
                        <i class="bi bi-list-ul me-2"></i> {% trans "View All Books in This Category" %}
                    </a>
                </div>
                {% endif %}
            </div>
            
            <!-- Subcategories -->
            {% if subcategories %}
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-folder text-info me-2"></i>
                        {% trans "Subcategories" %}
                    </h5>
                    <span class="badge bg-info rounded-pill">{{ subcategories.count }}</span>
                </div>
                <div class="card-body">
                    <div class="row">
                        {% for subcategory in subcategories %}
                        <div class="col-md-6 col-lg-4 mb-3">
                            <div class="card subcategory-card h-100">
                                <div class="card-body">
                                    <div class="d-flex align-items-start">
                                        <div class="subcategory-icon me-3">
                                            <i class="bi bi-tag"></i>
                                        </div>
                                        <div class="flex-grow-1">
                                            <h6 class="card-title mb-1">{{ subcategory.name }}</h6>
                                            <p class="card-text small text-muted mb-1">
                                                <code>{{ subcategory.code }}</code>
                                            </p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <span class="badge bg-primary stats-badge">
                                                    {{ subcategory.book_count }} {% trans "books" %}
                                                </span>
                                                <span class="badge {% if subcategory.status == 'active' %}bg-success{% else %}bg-secondary{% endif %} stats-badge">
                                                    {{ subcategory.get_status_display }}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer bg-transparent py-2">
                                    <div class="btn-group w-100">
                                        <a href="{% url 'library:bookcategory_detail' subcategory.pk %}" class="btn btn-sm btn-outline-primary">
                                            <i class="bi bi-eye"></i>
                                        </a>
                                        <a href="{% url 'library:bookcategory_update' subcategory.pk %}" class="btn btn-sm btn-outline-success">
                                            <i class="bi bi-pencil"></i>
                                        </a>
                                        <a href="{% url 'library:book_list' %}?category={{ subcategory.id }}" class="btn btn-sm btn-outline-info">
                                            <i class="bi bi-book"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="card-footer text-center">
                    <a href="{% url 'library:bookcategory_list' %}?parent={{ category.id }}" class="btn btn-outline-info">
                        <i class="bi bi-diagram-3 me-2"></i> {% trans "Manage All Subcategories" %}
                    </a>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<!-- Export Category Modal -->
<div class="modal fade" id="exportCategoryModal" tabindex="-1" aria-labelledby="exportCategoryModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exportCategoryModalLabel">{% trans "Export Category Data" %}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>{% trans "Choose the format for exporting category data:" %}</p>
                <div class="list-group">
                    <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <span>
                            <i class="bi bi-filetype-pdf text-danger me-2"></i>
                            {% trans "PDF Document" %}
                        </span>
                        <i class="bi bi-download text-muted"></i>
                    </a>
                    <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <span>
                            <i class="bi bi-file-spreadsheet text-success me-2"></i>
                            {% trans "Excel Spreadsheet" %}
                        </span>
                        <i class="bi bi-download text-muted"></i>
                    </a>
                    <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <span>
                            <i class="bi bi-file-text text-primary me-2"></i>
                            {% trans "CSV File" %}
                        </span>
                        <i class="bi bi-download text-muted"></i>
                    </a>
                </div>
                
                <div class="mt-3">
                    <label class="form-label">{% trans "Include:" %}</label>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="includeBooks" checked>
                        <label class="form-check-label" for="includeBooks">
                            {% trans "Books in this category" %}
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="includeSubcategories" checked>
                        <label class="form-check-label" for="includeSubcategories">
                            {% trans "Subcategories" %}
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="includeStatistics" checked>
                        <label class="form-check-label" for="includeStatistics">
                            {% trans "Category statistics" %}
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{% trans "Close" %}</button>
                <button type="button" class="btn btn-primary">{% trans "Export" %}</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize tooltips
        const tooltipTriggerList = [].slice.call(document.querySelectorAll('[title]'));
        const tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });
        
        // Description content expand/collapse functionality
        const descriptionContent = document.querySelector('.description-content');
        if (descriptionContent && descriptionContent.scrollHeight > 200) {
            const readMoreBtn = document.createElement('button');
            readMoreBtn.className = 'btn btn-sm btn-outline-primary mt-2';
            readMoreBtn.textContent = '{% trans "Read More" %}';
            readMoreBtn.type = 'button';
            
            readMoreBtn.addEventListener('click', function() {
                if (descriptionContent.style.maxHeight) {
                    descriptionContent.style.maxHeight = null;
                    readMoreBtn.textContent = '{% trans "Read More" %}';
                } else {
                    descriptionContent.style.maxHeight = 'none';
                    readMoreBtn.textContent = '{% trans "Show Less" %}';
                }
            });
            
            descriptionContent.parentNode.appendChild(readMoreBtn);
        }
        
        // Auto-refresh statistics every 2 minutes
        setInterval(function() {
            // In a real implementation, this would fetch updated statistics via AJAX
            console.log('Auto-refreshing category statistics...');
        }, 120000);
    });
</script>
{% endblock %}